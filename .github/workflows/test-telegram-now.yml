name: Test Telegram Bot Now

on:
  workflow_dispatch:

jobs:
  test-telegram:
    runs-on: ubuntu-latest
    steps:
      - name: Test Telegram Bot
        run: |
          echo "ğŸ¤– Testing Telegram Bot - Sending Test Message..."
          
          MESSAGE="ğŸ¤– Alpha stETH Telegram Bot Test

âœ… Bot is working correctly!
ğŸ“Š Ready to send analytics reports
ğŸ• Test time: $(date -u +%Y-%m-%dT%H:%M:%S.%3NZ)

ğŸ“ˆ Current Status:
- Export system: âœ… Working
- Data validation: âœ… Working  
- Report generation: âœ… Working
- Telegram integration: âœ… Ready

ğŸ¯ This is a direct test of the Telegram bot functionality!"

          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
            -H "Content-Type: application/json" \
            -d "{
              \"chat_id\": \"${{ secrets.TELEGRAM_CHAT_ID }}\",
              \"text\": \"$MESSAGE\",
              \"parse_mode\": \"Markdown\"
            }" | jq '.'
          
          echo "âœ… Telegram test completed!"
